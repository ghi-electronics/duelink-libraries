<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Tag Manager -->
    <script>
    (function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5BQ7LG4D');</script>
    <!-- End Google Tag Manager -->

    <title>DUELink Demo</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="sidenav_styles.css">
    <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <style>
        #colorSection {
            width: 400px;
            height: 60px;
            background-color: black;
            border: 1px solid black;
        }

        img {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
$(document).ready(function(){   
	$('#id-topbar').load("./common/html/id_topbar.html");
	$('#id-connect').load("./common/html/id_connect.html");
	$('#id-sidemenu').load("./common/html/id_sidemenu.html");
	$('#id-status').load("./common/html/id_status.html");
	$('#id-error').load("./common/html/id_error.html");
	$('#id-bottom').load("./common/html/id_bottom.html");
	$('#id-top').load("./common/html/id_top.html");
});
</script>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BQ7LG4D"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="topnav" id="id-topbar">
    </div>

    <div class="alert alert-primary" id="id-connect">
    </div>

    <div class="sidenav" id="id-sidemenu">
    </div>

    <div id="id-selections" class="container">
        <div id="id-top">
        </div>
        <fieldset id="id-inputs" class="border p-3" disabled="true">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="tab1" data-toggle="tab" href="#tab1Content" role="tab" aria-controls="tab1Content" aria-selected="true">Digital</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab2" data-toggle="tab" href="#tab2Content" role="tab" aria-controls="tab2Content" aria-selected="false">Analog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab3" data-toggle="tab" href="#tab3Content" role="tab" aria-controls="tab3Content" aria-selected="false">Sound</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab4" data-toggle="tab" href="#tab4Content" role="tab" aria-controls="tab4Content" aria-selected="false">Servo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab5" data-toggle="tab" href="#tab5Content" role="tab" aria-controls="tab5Content" aria-selected="false">NeoPixel</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab6" data-toggle="tab" href="#tab6Content" role="tab" aria-controls="tab6Content" aria-selected="false">Display</a>
                </li>
            </ul>

            <div class="tab-content mt-3">
                <div class="tab-pane fade show active" id="tab1Content" role="tabpanel" aria-labelledby="tab1">
                    <!-- Digital Tab -->
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                Digital Write
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="109">Pin</td>
                                            <td width="97">
                                                <select id="pinNumberDigitalWrite">                                                   
                                                    <option value="0">LED</option>
                                                    <option value="1">P1</option>
                                                    <option value="2">P2</option>
                                                    <option value="3">P3</option>
                                                    <option value="4">P4</option>
                                                    <option value="5">P5</option>
                                                    <option value="6">P6</option>
                                                    <option value="7">P7</option>
                                                    <option value="8">P8</option>
                                                    <option value="9">P9</option>
                                                    <option value="10">P10</option>
                                                    <option value="11">P11</option>
													<option value="12">P12</option>
													<option value="13">P13</option>
													<option value="14">P14</option>
													<option value="15">P15</option>
													<option value="16">P16</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="109">Value</td>
                                            <td width="97">
                                                <select id="valueDigitalWrite">
                                                    <option value="1">true</option>
                                                    <option value="0">false</option>
                                                </select>
                                            </td>
                                        </tr>
                                    </table>
                                    <button class="btn btn-primary" onclick="digitalWrite()">Set</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <!-- Digital Read -->
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                Digital Read
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="125">Pin</td>
                                            <td width="113">
                                                <select id="pinNumberDigitalRead">
													<option value="0">LED</option>
                                                    <option value="1">P1</option>
                                                    <option value="2">P2</option>
                                                    <option value="3">P3</option>
                                                    <option value="4">P4</option>
                                                    <option value="5">P5</option>
                                                    <option value="6">P6</option>
                                                    <option value="7">P7</option>
                                                    <option value="8">P8</option>
                                                    <option value="9">P9</option>
                                                    <option value="10">P10</option>
                                                    <option value="11">P11</option>
													<option value="12">P12</option>
													<option value="13">P13</option>
													<option value="14">P14</option>
													<option value="15">P15</option>
													<option value="16">P16</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="125">Pull</td>
                                            <td width="113">
                                                <select id="pullDigitalRead">
                                                    <option value="0">None</option>
                                                    <option value="1">Up</option>
                                                    <option value="2">Down</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                        <tr>
                                            <td width="125">Return: <span id="digitalReadReturn"></span></td>
                                            <td width="113">
                                            </td>
                                        </tr>
                                        </tr>
                                    </table>
                                    <button class="btn btn-primary" onclick="digitalRead()">Read</button>
                                </div>
                                <br>
                                <a href="https://duelink.com/software/api/digital.html">Digital API Documentation</a>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab2Content" role="tabpanel" aria-labelledby="tab2">
                    <!-- Analog Tab -->
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                Analog Write
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="176">Pin</td>
                                            <td width="62">
                                                <select id="pinNumberAnalogWrite">                                                                                                       
                                                    <option value="1">P1</option>
                                                    <option value="2">P2</option>
                                                    <option value="3">P3</option>
                                                    <option value="4">P4</option>
                                                    <option value="5">P5</option>
                                                    <option value="6">P6</option>
                                                    <option value="7">P7</option>
                                                    <option value="8">P8</option>
                                                    <option value="11">P11</option>												
                                                </select>
                                            </td>
                                        <tr>
                                            <td>

                                                <div class="rangeslider">
                                                    <input type="range" min="0" max="100"
                                                           value="50" class="myslider"
                                                           id="sliderRange">
                                                    <p>Value: <span id="demo"></span></p>
                                                </div>

                                                <script>
                                                    let rangeslider = document.getElementById("sliderRange");
                                                    let output = document.getElementById("demo");
                                                    output.innerHTML = rangeslider.value;

                                                    rangeslider.oninput = function () {
                                                        output.innerHTML = this.value;
                                                    }
                                                </script>
                                            </td>
                                        </tr>
                                        </tr>
                                    </table>

                                    <button class="btn btn-primary" onclick="analoglWrite()">Set</button>
                                </div>

                            </div>
                        </div>
                    </div>
                    <br>
                    <!-- Analog Read -->
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                Analog Read
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="109">Pin</td>
                                            <td width="129">
                                                <select id="pinNumber">
                                                    <option value="1">P1</option>
                                                    <option value="2">P2</option>
                                                    <option value="3">P3</option>
                                                    <option value="4">P4</option>
                                                    <option value="5">P5</option>
                                                    <option value="6">P6</option>
                                                    <option value="7">P7</option>
                                                    <option value="8">P8</option>
                                                    <option value="9">P9</option>
                                                    <option value="17">P17</option>
                                                    <option value="23">P23</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="109">Return: <span id="analogReadReturn"></span></td>
                                            <td width="129">
                                            </td>
                                        </tr>
                                    </table>
                                    <button class="btn btn-primary" onclick="analoglRead()">Read</button>
                                </div>
                                <br>
                                <a href="https://duelink.com/software/api/analog.html">Analog API Documentation</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sound Tab -->
                <div class="tab-pane fade" id="tab3Content" role="tabpanel" aria-labelledby="tab3">
                    <div class="row">
                        <div class="center">
                            Sound
                            <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                <table width="300">
                                    <tr>
                                        <td width="125">Pin</td>
                                        <td width="144">
                                            <select id="pinNumberSound">
												<option value="1">P1</option>
												<option value="2">P2</option>
												<option value="3">P3</option>
												<option value="4">P4</option>
												<option value="5">P5</option>
												<option value="6">P6</option>
												<option value="7">P7</option>
												<option value="8">P8</option>
												<option value="11">P11</option>		
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="125">Duration</td>
                                        <td width="144">
                                            <select id="playNote">
                                                <option value="130">C - 130Hz</option>
                                                <option value="146">D - 146Hz</option>
                                                <option value="164">E - 164Hz</option>
                                                <option value="174">F - 174Hz</option>
                                                <option value="196">G - 196Hz</option>
                                                <option value="220">A - 220Hz</option>
                                                <option value="246">B - 246Hz</option>
                                                <option value="261">C - 261Hz</option>
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                                <button class="btn btn-primary" onclick="playSound()">Beep</button>
                            </div>
                            <br>
                            <a href="https://duelink.com/software/api/sound.html">Sound API Documentation</a>
                        </div>
                    </div>
                </div>
                <!-- Servo Tab -->
                <div class="tab-pane fade" id="tab4Content" role="tabpanel" aria-labelledby="tab4">
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                Servo Motor
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="176">Pin</td>
                                            <td width="62">
                                                <select id="pinNumberServo">
                                                    <option value="1">P1</option>
													<option value="2">P2</option>
													<option value="3">P3</option>
													<option value="4">P4</option>
													<option value="5">P5</option>
													<option value="6">P6</option>
													<option value="7">P7</option>
													<option value="8">P8</option>
													<option value="11">P11</option>		
                                                </select>
                                            </td>
                                        <tr>
                                            <!---Servo Slider-->
                                            <td>
                                                <div class="rangesliderServo">
                                                    <input type="range" min="0" max="180"
                                                           value="90" class="mysliderServo"
                                                           id="sliderRangeServo">
                                                    <p>Position: <span id="demoServo"></span></p>
                                                </div>
                                                <script>
                                                    let rangesliderServo = document.getElementById("sliderRangeServo");
                                                    let output2 = document.getElementById("demoServo");
                                                    output2.innerHTML = rangesliderServo.value + ' degrees';

                                                    rangesliderServo.oninput = function () {
                                                        output2.innerHTML = this.value + ' degrees';
                                                    }

                                                </script>
                                            </td>
                                        </tr>
                                        </tr>
                                    </table>
                                    <button class="btn btn-primary" onclick="setServo()">Set</button>
                                </div>
                                <br>
                                <a href="https://duelink.com/software/api/servo.html">Servo API Documentation</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- NeoPixel Tab -->
                <div class="tab-pane fade" id="tab5Content" role="tabpanel" aria-labelledby="tab5">
                    <div class="row">
                        <div class="center">
                            <div class="center">
                                NeoPixel
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <table width="300">
                                        <tr>
                                            <td width="136">Pin</td>
                                            <td width="152">
                                                <select id="pinNumberNeoPixel">                     
                                                    <option value="1">P1</option>
                                                    <option value="2">P2</option>
                                                    <option value="3">P3</option>
                                                    <option value="4">P4</option>
                                                    <option value="5">P5</option>
                                                    <option value="6">P6</option>
                                                    <option value="7">P7</option>
                                                    <option value="8">P8</option>
                                                    <option value="9">P9</option>
                                                    <option value="10">P10</option>
                                                    <option value="11">P11</option>
													<option value="12">P12</option>
                                                    <option value="13">P13</option>
                                                    <option value="14">P14</option>
                                                    <option value="15">P15</option>
                                                    <option value="16">P16</option>
                                                </select>
                                            </td>
			
											
											
                                        </tr>
										
										

                                        <!---NeoPixel RED Slider-->
                                        <td>

                                            <div class="rangesliderNeoPixelRED">
                                                <input type="range" min="0" max="255"
                                                       value="128" class="mysliderNeoPixelRED"
                                                       id="sliderRangeNeoPixelRED">
                                                <p>Red: <span id="demoNeoPixelRED"></span></p>
                                            </div>

                                            <script>
                                                let rangesliderNeoPixelRED = document.getElementById("sliderRangeNeoPixelRED");
                                                let outputRED = document.getElementById("demoNeoPixelRED");
                                                outputRED.innerHTML = rangesliderNeoPixelRED.value;

                                                rangesliderNeoPixelRED.oninput = function () {
                                                    setColorSwatch();
                                                    outputRED.innerHTML = this.value;
                                                }
                                            </script>
                                        </td>

                                        <!---NeoPixel GREEN Slider-->
                                        <td>

                                            <div class="rangesliderNeoPixelGREEN">
                                                <input type="range" min="0" max="255"
                                                       value="128" class="mysliderNeoPixelGREEN"
                                                       id="sliderRangeNeoPixelGREEN">
                                                <p>Green: <span id="demoNeoPixelGREEN"></span></p>
                                            </div>

                                            <script>
                                                let rangesliderNeoPixelGREEN = document.getElementById("sliderRangeNeoPixelGREEN");
                                                let outputGREEN = document.getElementById("demoNeoPixelGREEN");
                                                outputGREEN.innerHTML = rangesliderNeoPixelGREEN.value;

                                                rangesliderNeoPixelGREEN.oninput = function () {
                                                    setColorSwatch();
                                                    outputGREEN.innerHTML = this.value;
                                                }
                                            </script>
                                        </td>

                                        <!---NeoPixel BLUE Slider-->
                                        <td>

                                            <div class="rangesliderNeoPixelBLUE">
                                                <input type="range" min="0" max="255"
                                                       value="128" class="mysliderNeoPixelBLUE"
                                                       id="sliderRangeNeoPixelBLUE">
                                                <p>Blue: <span id="demoNeoPixelBLUE"></span></p>
                                            </div>

                                            <script>
                                                let rangesliderNeoPixelBLUE = document.getElementById("sliderRangeNeoPixelBLUE");
                                                let outputBLUE = document.getElementById("demoNeoPixelBLUE");
                                                outputBLUE.innerHTML = rangesliderNeoPixelBLUE.value;

                                                rangesliderNeoPixelBLUE.oninput = function () {
                                                    setColorSwatch();
                                                    outputBLUE.innerHTML = this.value;
                                                }
                                            </script>
                                        </td>
                                        <div id="colorSection"></div>
                                        <br>

                                    </table>
                                   								
									<label>LED Index: </label>
                                    <input type="text" id="neoPixelIndex" name="neoPixelIndexName" value="0" />
                                    <br>
                                    <label>LED Count: </label>
                                    <input type="text" id="neoPixelCount" name="neoPixelCountName" value="16" />
                                    <br>
                                    <button class="btn btn-primary" onclick="neoPixelSet()">Set Index</button>
                                    <button class="btn btn-primary" onclick="neoPixelCycle()">Cycle</button>
                                    <button class="btn btn-primary" onclick="neoPixelClearAll()">Clear All</button>


                                </div>
                                <br>
                                <a href="https://duelink.com/software/api/neopixel.html">NeoPixel API Documentation</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab6Content" role="tabpanel" aria-labelledby="tab6">
                    <div class="row">
                        <div class="center">
                            Display
                            <div class="center">
                                <div style="border: solid 1px; padding: 0.5em; margin-top:0.5em; ">
                                    <!-- <div style="text-align:center;"> -->
                                        <!-- <p> -->
                                            <!-- <canvas id="surface" width="128" height="64" style="width: 200px; height: 100px; background-color: black;"> -->
                                            <!-- </canvas> -->
                                        <!-- </p> -->
                                    <!-- </div> -->
                                    <!-- <button class="btn btn-primary" onclick="sendImage()">Show Image</button> -->
									<p>
										<td width="136">Select DUELink display</td>
										<td width="152">
											<select id="displayNumber">                     
												<option value="1">TFT CP23</option>
												<option value="2">PixoBit</option>
												<option value="3">CincoBit</option>
												<option value="4">LCD 16x2</option>
												<option value="5">LCD 20x4</option>
												<option value="6">OLED 096</option>
												<option value="7">TFT N18</option>
												<option value="8">TFT R128</option>
												<option value="9">TFT T32</option>
												<option value="10">VFD B8</option>											
											</select>
										</td>
									</p>
                                    <p>
                                        <br>
                                        <label>Input text:</label>
                                        <input type="text" id="textsendid" name="textsendname" value="Hello DUELink!" />
                                        <button class="btn btn-primary" onclick="sendText()">Show Text </button>
                                    </p>
                                </div>
                                <br>
                                <a href="https://duelink.com/software/api/lcd.html">Display API Documentation</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </fieldset>
        <div id="id-bottom">
        </div>

    </div>

    <div id="id-status" style="display:none">
    </div>

    <div id="id-error" style="display: none;">
    </div>

</body>

<script type="text/javascript" src="./common/js/dropdown_menu.js"></script>
</html><script>
    import("./src/serialweb/serialweb.js").then(mod => serial = mod);
    import("./src/duelink/duelink.js").then(mod => due = mod);

    // Get canvas context
    let canvas = document.getElementById("surface");
    let ctx = canvas.getContext("2d", { willReadFrequently: true });
    let color_depth = 1;
	const img = new Image();
	img.src = 'logo.bmp';

	img.onload = function() {
		ctx.drawImage(img, 0, 0, canvas.width, canvas.height); 
	}
    function selectTab(tabIndex) {
        //Hide All Tabs
        document.getElementById("tab1Content").style.display = "none";
        document.getElementById("tab2Content").style.display = "none";
        document.getElementById("tab3Content").style.display = "none";
        document.getElementById("tab4Content").style.display = "none";
        document.getElementById("tab5Content").style.display = "none";
        document.getElementById("tab6Content").style.display = "none";
        //Show the Selected Tab
        document.getElementById("tab" + tabIndex + "Content").style.display =
            "block";
    }
	
	function delay(ms) {
	  return new Promise(resolve => setTimeout(resolve, ms));
	}

    function Check() {
        if (!this.duelink)
            this.duelink = new due.DUELinkController(new serial.WebSerial());
    }

    async function connect() {
        try {
            hideError();
            Check();
            await duelink.Connect();
            
            $("#id-version").text(duelink.Version);
            $("#id-connect").slideUp();
            $("#id-inputs").prop("disabled", false);

        } catch (e) {
            showError("connect Error" + e);
        }
    }

    async function digitalWrite() {
        Check();
        var pinDWrite = $("#pinNumberDigitalWrite").val()/1;
        var valueDWrite = $("#valueDigitalWrite").val()/1;
        await duelink.Digital.Write(pinDWrite, valueDWrite);
    }

    async function digitalRead() {
        Check();
        var pinDRead = $("#pinNumberDigitalRead").val()/1;
        var pullDRead = $("#pullDigitalRead").val()/1;
        var returnDigitalRead = await duelink.Digital.Read(pinDRead, pullDRead);

        document.getElementById("digitalReadReturn").innerHTML = returnDigitalRead;
    }

    async function analoglWrite() {
        Check();
        var pinAWrite = $("#pinNumberAnalogWrite").val()/1;
        let rangeslider = document.getElementById("sliderRange");
        let output = document.getElementById("demo");
        output.innerHTML = rangeslider.value;

        rangeslider.oninput = function () {
            output.innerHTML = this.value;
        }
        var valueRange = rangeslider.value;
        var aValue = valueRange / 1;
        await duelink.Analog.Write(pinAWrite, aValue);
    }

    async function setServo() {
        Check();
        var pinServo = $("#pinNumberServo").val()/1;
        var valueSelectedServo = $("#valueServo").val();
        let rangesliderServo = document.getElementById("sliderRangeServo");
        let output2 = document.getElementById("demoServo");
        output2.innerHTML = rangesliderServo.value + ' degrees';

        rangesliderServo.oninput = function () {
            output2.innerHTML = this.value  + ' degrees';
        }
        var valueRangeServo = rangesliderServo.value;
        var servoValue = valueRangeServo / 1;
        await duelink.Servo.Set(pinServo, servoValue);
    }

    async function analoglRead() {
        Check();
        var returnAnalogRead = await duelink.Analog.Read(0);
        document.getElementById("analogReadReturn").innerHTML = returnAnalogRead;
    }
	
    async function neoPixelClearAll() {
        Check();
		var pinNeoPixel = $("#pinNumberNeoPixel").val()/1;
		var countNeoPixel = neoPixelCount.value/1;
		
		await duelink.Graphics.Configuration(3, [pinNeoPixel, countNeoPixel, 1 , 0], countNeoPixel, 1, 1);
		
       	await duelink.Graphics.Clear();	
		await duelink.Graphics.Show();
       
    }
	
	async function neoPixelCycle(){
		
		var pinNeoPixel = $("#pinNumberNeoPixel").val()/1;

		//RED Slider Value
		let rangesliderNeoPixelRED = document.getElementById("sliderRangeNeoPixelRED");
        var red = rangesliderNeoPixelRED.value/1;
		
		//GREEN Slider Value
		let rangesliderNeoPixelGREEN = document.getElementById("sliderRangeNeoPixelGREEN");
        var green = rangesliderNeoPixelGREEN.value/1;

		
		//GREEN Slider
		let rangesliderNeoPixelBLUE = document.getElementById("sliderRangeNeoPixelBLUE");
		var blue = rangesliderNeoPixelBLUE.value/1;

		

		var countNeoPixel = neoPixelCount.value/1;
		
		await duelink.Graphics.Configuration(3, [pinNeoPixel, countNeoPixel, 1, 0], countNeoPixel, 1, 1);
				
		for(let i=0; i<countNeoPixel;i++){
			await duelink.Graphics.Clear();	
			await delay(10); 
			await duelink.Graphics.Pixel((red<<16) | (green << 8) | (blue<<0),i, 0 );
			await duelink.Graphics.Show();
			await delay(10); 
		}				
	}
	
	async function neoPixelSet() {
        Check();
		var pinNeoPixel = $("#pinNumberNeoPixel").val()/1;

		//RED Slider
		let rangesliderNeoPixelRED = document.getElementById("sliderRangeNeoPixelRED");
        let outputRED = document.getElementById("demoNeoPixelRED");
        outputRED.innerHTML = rangesliderNeoPixelRED.value;

        rangesliderNeoPixelRED.oninput = function () {
            outputRED.innerHTML = this.value;
        }
        var red = rangesliderNeoPixelRED.value/1;
		
		//GREEN Slider
		let rangesliderNeoPixelGREEN = document.getElementById("sliderRangeNeoPixelGREEN");
        let outputGREEN = document.getElementById("demoNeoPixelGREEN");
        outputGREEN.innerHTML = rangesliderNeoPixelGREEN.value;

        rangesliderNeoPixelGREEN.oninput = function () {
            outputGREEN.innerHTML = this.value;
        }
        var green = rangesliderNeoPixelGREEN.value/1;

		
		//GREEN Slider
		let rangesliderNeoPixelBLUE = document.getElementById("sliderRangeNeoPixelBLUE");
        let outputBLUE = document.getElementById("demoNeoPixelBLUE");
        outputBLUE.innerHTML = rangesliderNeoPixelBLUE.value;
        var blue = rangesliderNeoPixelBLUE.value/1;
		
		var index = neoPixelIndex.value/1;		
		var countNeoPixel = neoPixelCount.value/1;
			
		await duelink.Graphics.Configuration(3, [pinNeoPixel, countNeoPixel, 1, 0], countNeoPixel, 1, 1);
		await duelink.Graphics.Pixel(((red<<16) | (green << 8) | (blue<<0)),index, 0 );
		await duelink.Graphics.Show();		
    }
	
	async function setColorSwatch(){
		
		//RED Slider
		let rangesliderNeoPixelRED = document.getElementById("sliderRangeNeoPixelRED");
        var red = rangesliderNeoPixelRED.value/1;
		
		//GREEN Slider
		let rangesliderNeoPixelGREEN = document.getElementById("sliderRangeNeoPixelGREEN");
        var green = rangesliderNeoPixelGREEN.value/1;
		
		//GREEN Slider
		let rangesliderNeoPixelBLUE = document.getElementById("sliderRangeNeoPixelBLUE");
        var blue = rangesliderNeoPixelBLUE.value/1;	
			
		
		const color = `rgb(${red}, ${green}, ${blue})`;
    document.getElementById('colorSection').style.backgroundColor = color;
	}	

    async function playSound() {
        Check();
        var pinSound = $("#pinNumberSound").val()/1;
        var noteSoundValue = $("#playNote").val()/1;
        await duelink.Frequency.Write(pinSound, noteSoundValue, 500);
    }

    async function sendImage() {
        Check();		
			let frameBuffer = ctx.getImageData(0, 0, canvas.width, canvas.height);
        	await duelink.Display.ShowBuffer(frameBuffer.data, color_depth);		     
    }

    async function sendText() {
        Check();
		
		var displayNumber = $("#displayNumber").val()/1;
		
		console.log(displayNumber)
		if (displayNumber == 3) {
			await duelink.Graphics.Clear(0);
			var msg = $("#textsendid").val();
			await duelink.Graphics.TextT(msg, 1, 0, 0);
			await duelink.Graphics.Show();
			
			
		}
		else if (displayNumber < 4) {
			await duelink.Graphics.Clear(0);
			var msg = $("#textsendid").val();
			await duelink.Graphics.Text(msg, 1, 1, 1);
			await duelink.Graphics.Show();

		}
		else {		
			showError("This display is under testing...");
		}
    }

    function hideError() {
        $("#id-error").hide();
    }

    function showStatus(message) {
        $("#id-inputs").prop("disabled", true);
        hideError();
        $("#id-status").show();
        $("#status-message").text(message);
        $.when($("#id-status").fadeOut(1000)).done(
            function () { $("#id-inputs").prop("disabled", false); }
        );
    }

    function showError(message) {
        $("#id-inputs").prop("disabled", true);
        $("#id-error").show();
        $("#error-message").text(message);
    }
</script>